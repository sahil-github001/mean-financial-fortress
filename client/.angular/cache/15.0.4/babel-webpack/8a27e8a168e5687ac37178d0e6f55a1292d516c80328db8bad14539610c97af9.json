{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport class DataService {\n  constructor() {\n    this.userDetails = {\n      1000: {\n        acno: 1000,\n        username: 'Amal',\n        password: 1000,\n        balance: 2000,\n        transaction: []\n      },\n      1001: {\n        acno: 1001,\n        username: 'Arun',\n        password: 1001,\n        balance: 2000,\n        transaction: []\n      },\n      1002: {\n        acno: 1002,\n        username: 'Akshay',\n        password: 1002,\n        balance: 2000,\n        transaction: []\n      }\n    };\n  }\n  saveDetails() {\n    if (this.userDetails) {\n      localStorage.setItem('Database', JSON.stringify(this.userDetails));\n      localStorage.setItem('currentUser', JSON.stringify(this.currentUser));\n      localStorage.setItem('currentAcno', JSON.stringify(this.currentAcno));\n    }\n  }\n  getDetails() {\n    if (localStorage.getItem('Database')) {\n      this.userDetails = JSON.parse(localStorage.getItem('Database') || '');\n    }\n    if (localStorage.getItem('currentAcno')) {\n      this.currentAcno = JSON.parse(localStorage.getItem('currenAcno') || '');\n    }\n    if (localStorage.getItem('currentUser')) {\n      this.currentUser = JSON.parse(localStorage.getItem('currentUser') || '');\n    }\n  }\n  register(acno, uname, pswd) {\n    let userDetails = this.userDetails;\n    if (acno in userDetails) {\n      return false;\n    } else {\n      userDetails[acno] = {\n        acno: acno,\n        username: uname,\n        password: pswd,\n        balance: 0,\n        transaction: []\n      };\n      this.saveDetails();\n      return true;\n    }\n  }\n  login(acno, pswd) {\n    let userDetails = this.userDetails;\n    if (acno in userDetails) {\n      if (pswd == userDetails[acno].password) {\n        this.currentUser = userDetails[acno].username;\n        this.currentAcno = acno;\n        this.saveDetails();\n        return true;\n      } else {\n        alert('Invalid password');\n        return false;\n      }\n    } else {\n      alert('Invalid user');\n      return false;\n    }\n  }\n  deposit(acno, pswd, dAmt) {\n    let userDetails = this.userDetails;\n    if (acno in userDetails) {\n      if (pswd == userDetails[acno].password) {\n        dAmt = parseInt(dAmt);\n        userDetails[acno].balance += dAmt;\n        userDetails[acno]['transaction'].push({\n          type: 'Credit',\n          amount: dAmt\n        });\n        this.saveDetails();\n        return userDetails[acno].balance;\n      } else {\n        alert('Invalid password');\n        return false;\n      }\n    } else {\n      alert('Invalid user');\n      return false;\n    }\n  }\n  withdraw(acno1, pswd1, wAmt) {\n    let userDetails = this.userDetails;\n    if (acno1 in userDetails) {\n      if (pswd1 == userDetails[acno1].password) {\n        wAmt = parseInt(wAmt);\n        if (userDetails[acno1].balance > wAmt) {\n          userDetails[acno1].balance -= wAmt;\n          userDetails[acno1]['transaction'].push({\n            type: 'Debit',\n            amount: wAmt\n          });\n          this.saveDetails();\n          return userDetails[acno1].balance;\n        } else {\n          alert('insufficient balance');\n          return false;\n        }\n      } else {\n        alert('Invalid password');\n        return false;\n      }\n    } else {\n      alert('Invalid user');\n      return false;\n    }\n  }\n  getTransaction(acno) {\n    this.saveDetails();\n    return this.userDetails[acno]['transaction'];\n  }\n}\nDataService.ɵfac = function DataService_Factory(t) {\n  return new (t || DataService)();\n};\nDataService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DataService,\n  factory: DataService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["DataService","constructor","acno","username","password","balance","transaction","saveDetails","userDetails","localStorage","setItem","JSON","stringify","currentUser","currentAcno","getDetails","getItem","parse","register","uname","pswd","login","alert","deposit","dAmt","parseInt","push","type","amount","withdraw","acno1","pswd1","wAmt","getTransaction","factory","providedIn"],"sourceRoot":"","sources":["D:\\backup\\bankapp-using-angular\\src\\app\\services\\data.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DataService {\r\n\r\n  currentUser:any;// To hold currentuser\r\n  currentAcno:any; // To hold current acno\r\n\r\n  userDetails:any = {\r\n    1000 : {acno:1000, username:'Amal', password:1000, balance:2000, transaction:[]},\r\n    1001 : {acno:1001, username:'Arun', password:1001, balance:2000, transaction:[]},\r\n    1002 : {acno:1002, username:'Akshay', password:1002, balance:2000, transaction:[]}\r\n  }\r\n\r\n  constructor() { }\r\n\r\n  saveDetails(){\r\n    if(this.userDetails){\r\n      localStorage.setItem('Database',JSON.stringify(this.userDetails));\r\n\r\n      localStorage.setItem('currentUser',JSON.stringify(this.currentUser));\r\n\r\n      localStorage.setItem('currentAcno',JSON.stringify(this.currentAcno));\r\n    }\r\n  }\r\n\r\n  getDetails(){\r\n    if(localStorage.getItem('Database')){\r\n      this.userDetails = JSON.parse(localStorage.getItem('Database') || '');\r\n    }\r\n    if(localStorage.getItem('currentAcno')){\r\n      this.currentAcno = JSON.parse(localStorage.getItem('currenAcno') || '');\r\n    }\r\n    if(localStorage.getItem('currentUser')){\r\n      this.currentUser = JSON.parse(localStorage.getItem('currentUser') || '');\r\n    }\r\n  }\r\n\r\n  register(acno:any, uname:any, pswd:any){\r\n    let userDetails = this.userDetails;\r\n\r\n    if (acno in userDetails){\r\n      return false;\r\n    } else {\r\n      userDetails[acno] = {\r\n        acno:acno,\r\n        username:uname,\r\n        password:pswd,\r\n        balance:0,\r\n        transaction:[]\r\n      }\r\n      this.saveDetails();\r\n      return true;\r\n    }\r\n  }\r\n\r\n  login(acno:any, pswd:any){\r\n    let userDetails = this.userDetails;\r\n    \r\n    if(acno in userDetails){\r\n      if(pswd == userDetails[acno].password){\r\n        this.currentUser = userDetails[acno].username;\r\n        this.currentAcno = acno;\r\n        this.saveDetails();\r\n        return true;\r\n      }else{\r\n        alert('Invalid password');\r\n        return false;\r\n      }\r\n    }else{\r\n      alert('Invalid user');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  deposit(acno:any, pswd:any, dAmt:any){\r\n    let userDetails = this.userDetails;\r\n\r\n    if (acno in userDetails){\r\n      if (pswd == userDetails[acno].password){\r\n        dAmt = parseInt(dAmt);\r\n        userDetails[acno].balance += dAmt;\r\n\r\n        userDetails[acno]['transaction'].push({\r\n          type:'Credit',\r\n          amount:dAmt\r\n        })\r\n        this.saveDetails();\r\n        return userDetails[acno].balance;\r\n      }else {\r\n        alert('Invalid password');\r\n        return false;\r\n      }\r\n    }else{\r\n      alert('Invalid user');\r\n      return false\r\n    }\r\n  }\r\n  \r\n  withdraw(acno1:any, pswd1:any, wAmt:any){\r\n    let userDetails = this.userDetails;\r\n\r\n    if(acno1 in userDetails){\r\n      if(pswd1 == userDetails[acno1].password){\r\n        wAmt = parseInt(wAmt);\r\n        if(userDetails[acno1].balance > wAmt){\r\n          userDetails[acno1].balance -= wAmt;\r\n\r\n          userDetails[acno1]['transaction'].push({\r\n            type:'Debit',\r\n            amount:wAmt\r\n          })\r\n          this.saveDetails();\r\n          return userDetails[acno1].balance;\r\n        } else{\r\n          alert('insufficient balance');\r\n          return false;\r\n        }\r\n      }else{\r\n        alert('Invalid password');\r\n        return false;\r\n      }\r\n    }else{\r\n      alert('Invalid user');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  getTransaction(acno:any){\r\n    this.saveDetails();\r\n    return this.userDetails[acno]['transaction'];\r\n  }\r\n\r\n  \r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}